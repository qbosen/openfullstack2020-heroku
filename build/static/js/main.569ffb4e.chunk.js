(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{41:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var r=t(0),c=t(1),o=t.n(c),u=t(17),a=t.n(u),i=t(8),s=t(18),j=t(3),b=function(e){var n=e.onFilterChange,t=e.filter;return Object(r.jsxs)("div",{children:["filter shown with ",Object(r.jsx)("input",{onChange:n,value:t})]})},d=function(e){var n=e.onNameChange,t=e.newName,c=e.onNumberChange,o=e.newNumber,u=e.onFormSubmit;return Object(r.jsxs)("form",{onSubmit:u,children:[Object(r.jsxs)("div",{children:["name: ",Object(r.jsx)("input",{onChange:n,value:t})]}),Object(r.jsxs)("div",{children:["number: ",Object(r.jsx)("input",{onChange:c,value:o})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",children:"add"})})]})},f=function(e){var n=e.person,t=e.onRemove;return Object(r.jsxs)("div",{children:[n.name," ",n.number,Object(r.jsx)("button",{onClick:t(n),children:"\u5220\u9664"})]})},m=function(e){var n=e.persons,t=e.onRemove;return Object(r.jsx)("div",{children:n.map((function(e){return Object(r.jsx)(f,{person:e,onRemove:t},e.name)}))})},h=t(5),l=t.n(h),O="/api/persons",v=function(){return l.a.get(O).then((function(e){return e.data}))},p=function(e){return l.a.post(O,e).then((function(e){return e.data}))},x=function(e,n){return l.a.put("".concat(O,"/").concat(e),n).then((function(e){return e.data}))},g=function(e){return l.a.delete("".concat(O,"/").concat(e)).then((function(e){return e.data}))},w=function(e){var n=e.message;if(0===n.length)return null;var t=n[0];return Object(r.jsx)("div",{className:t.success?"notification":"error",children:t.message})},C=function(){var e=Object(c.useState)([]),n=Object(j.a)(e,2),t=n[0],o=n[1],u=Object(c.useState)(""),a=Object(j.a)(u,2),f=a[0],h=a[1],l=Object(c.useState)(""),O=Object(j.a)(l,2),C=O[0],N=O[1],S=Object(c.useState)(""),k=Object(j.a)(S,2),y=k[0],F=k[1],R=Object(c.useState)([]),T=Object(j.a)(R,2),D=T[0],E=T[1],I=Object(s.a)(t.filter((function(e){return e.name.toLowerCase().startsWith(y.toLowerCase())})));return Object(c.useEffect)((function(){v().then((function(e){return o(e)}))}),[]),Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Phonebook"}),Object(r.jsx)(w,{message:D}),Object(r.jsx)(b,{onFilterChange:function(e){F(e.target.value)},filter:y}),Object(r.jsx)("h3",{children:"add a new"}),Object(r.jsx)(d,{onNumberChange:function(e){return N(e.target.value)},newNumber:C,onNameChange:function(e){return h(e.target.value)},newName:f,onFormSubmit:function(e){e.preventDefault();var n=t.find((function(e){return e.name===f}));if(n){if(window.confirm("".concat(f," is already added to phonebook, replace the old number with a new one?"))){var r=Object(i.a)(Object(i.a)({},n),{},{name:f,number:C});x(n.id,r).then((function(e){o(t.map((function(e){return e.id!==n.id?e:r}))),N(""),h(""),E([{message:"Update ".concat(f),success:!0}]),setTimeout((function(){return E([])}),5e3)})).catch((function(e){E([{message:"Information of ".concat(f," has already been removed from server"),success:!1}]),o(t.filter((function(e){return e.id!==n.id}))),setTimeout((function(){return E([])}),5e3)}))}}else p({name:f,number:C}).then((function(e){o(t.concat(e)),N(""),h(""),E([{message:"Add ".concat(f),success:!0}]),setTimeout((function(){return E([])}),5e3)}))}}),Object(r.jsx)("h3",{children:"Numbers"}),Object(r.jsx)(m,{persons:I,onRemove:function(e){return function(n){window.confirm("Delete ".concat(e.name))&&g(e.id).then((function(n){return o(t.filter((function(n){return n.id!==e.id})))}))}}})]})};t(41);a.a.render(Object(r.jsx)(o.a.StrictMode,{children:Object(r.jsx)(C,{})}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.569ffb4e.chunk.js.map